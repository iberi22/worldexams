---
import Layout from '../layouts/Layout.astro';
import App from '../components/App.svelte';

// Configuration
const API_BASE_URL = import.meta.env.PUBLIC_API_BASE_URL || 'https://worldexams.pages.dev/api/v1';

// No longer using local content collections - all questions loaded from API
// Questions will be fetched client-side by the App component

// Debug stats (visible in page source during development)
const stats = {
  source: 'API',
  apiBaseUrl: API_BASE_URL,
  note: 'Questions loaded dynamically from WorldExams API'
};
---

<Layout
  title="Banco de Preguntas ICFES Saber 11 | SaberParaTodos"
  description="El mejor banco de preguntas open source para las pruebas Saber 11. Practica Matemáticas, Ciencias, Inglés y más con simulacros gratuitos."
  showNavbar={false}
  showFooter={false}
>
  <!-- Debug info (hidden, for development) -->
  <script is:inline type="application/json" id="question-stats" set:html={JSON.stringify(stats)} />

  <!-- API Config for client-side fetching -->
  <script is:inline type="application/json" id="api-config" set:html={JSON.stringify({ apiBaseUrl: API_BASE_URL })} />

  <App
    client:load
    questions={[]}
    universalPool={null}
  />
</Layout>

<style is:global>
  /* Ensure KaTeX renders properly in dark theme */
  .katex-display {
    margin: 1em 0;
    padding: 0.75em;
    background: rgba(16, 185, 129, 0.05);
    border-radius: 0.5rem;
    overflow-x: auto;
  }

  .katex {
    font-size: 1.1em;
  }

  /* Markdown-style content in explanations */
  .math-content strong {
    color: #10b981;
    font-weight: 600;
  }

  .math-content em {
    font-style: italic;
  }
</style>
