---
/**
 * SVG Icons for ICFES subjects
 * Cyber-minimalist style with Colombia flag colors
 *
 * Usage: import { getSubjectIcon } from './SubjectIcons.astro'
 */

export interface Props {
  subject: string;
  size?: 'sm' | 'md' | 'lg';
  showLabel?: boolean;
}

const { subject, size = 'md', showLabel = false } = Astro.props;

const sizeClasses = {
  sm: 'w-5 h-5',
  md: 'w-6 h-6',
  lg: 'w-8 h-8'
};

// Map subject names to their icon keys (handles variations)
const subjectMap: Record<string, string> = {
  // Lectura Crítica
  'lectura crítica': 'lectura',
  'lectura critica': 'lectura',
  'lenguaje': 'lectura',
  'español': 'lectura',

  // Matemáticas
  'matemáticas': 'matematicas',
  'matematicas': 'matematicas',
  'matemática': 'matematicas',

  // Ciencias Naturales
  'ciencias naturales': 'ciencias',
  'ciencias': 'ciencias',
  'biología': 'ciencias',
  'química': 'ciencias',
  'física': 'ciencias',

  // Sociales y Ciudadanas
  'sociales y ciudadanas': 'sociales',
  'sociales': 'sociales',
  'ciudadanas': 'sociales',
  'competencias ciudadanas': 'sociales',
  'historia': 'sociales',
  'geografía': 'sociales',

  // Inglés
  'inglés': 'ingles',
  'ingles': 'ingles',
  'english': 'ingles',
};

const iconKey = subjectMap[subject.toLowerCase()] || 'default';

// SVG icons with Colombia flag colors as accents
const icons: Record<string, string> = {
  lectura: `<svg viewBox="0 0 24 24" fill="none" class="${sizeClasses[size]}">
    <path d="M4 4h16v16H4V4z" stroke="currentColor" stroke-width="1.5" fill="none"/>
    <path d="M7 8h10M7 11h10M7 14h6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
    <circle cx="18" cy="16" r="3" fill="#FCD116" stroke="currentColor" stroke-width="1"/>
    <path d="M17 16h2" stroke="currentColor" stroke-width="1" stroke-linecap="round"/>
  </svg>`,

  matematicas: `<svg viewBox="0 0 24 24" fill="none" class="${sizeClasses[size]}">
    <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="1.5" fill="none"/>
    <text x="6" y="12" fill="#003893" font-size="7" font-family="monospace" font-weight="bold">π</text>
    <text x="14" y="12" fill="#FCD116" font-size="7" font-family="monospace" font-weight="bold">∑</text>
    <text x="6" y="19" fill="#CE1126" font-size="7" font-family="monospace" font-weight="bold">√</text>
    <text x="14" y="19" fill="currentColor" font-size="7" font-family="monospace">∞</text>
  </svg>`,

  ciencias: `<svg viewBox="0 0 24 24" fill="none" class="${sizeClasses[size]}">
    <path d="M9 3v6l-3 9c0 1 1 3 6 3s6-2 6-3l-3-9V3" stroke="currentColor" stroke-width="1.5" fill="none"/>
    <path d="M9 3h6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
    <circle cx="10" cy="14" r="1.5" fill="#FCD116"/>
    <circle cx="14" cy="16" r="1" fill="#003893"/>
    <circle cx="12" cy="18" r="1" fill="#CE1126"/>
    <path d="M9 9h6" stroke="currentColor" stroke-width="1" opacity="0.5"/>
  </svg>`,

  sociales: `<svg viewBox="0 0 24 24" fill="none" class="${sizeClasses[size]}">
    <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5" fill="none"/>
    <ellipse cx="12" cy="12" rx="9" ry="4" stroke="currentColor" stroke-width="1" opacity="0.5"/>
    <path d="M12 3v18" stroke="currentColor" stroke-width="1" opacity="0.5"/>
    <circle cx="8" cy="8" r="2" fill="#FCD116" opacity="0.8"/>
    <circle cx="16" cy="14" r="2" fill="#003893" opacity="0.8"/>
    <circle cx="10" cy="16" r="1.5" fill="#CE1126" opacity="0.8"/>
  </svg>`,

  ingles: `<svg viewBox="0 0 24 24" fill="none" class="${sizeClasses[size]}">
    <rect x="3" y="5" width="18" height="14" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"/>
    <text x="6" y="15" fill="currentColor" font-size="8" font-family="monospace" font-weight="bold">A</text>
    <text x="13" y="15" fill="#003893" font-size="8" font-family="monospace" font-weight="bold">B</text>
    <path d="M11 7h7" stroke="#FCD116" stroke-width="1.5" stroke-linecap="round"/>
    <path d="M3 17h18" stroke="#CE1126" stroke-width="2"/>
  </svg>`,

  default: `<svg viewBox="0 0 24 24" fill="none" class="${sizeClasses[size]}">
    <rect x="4" y="4" width="16" height="16" rx="2" stroke="currentColor" stroke-width="1.5" fill="none"/>
    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5" fill="none"/>
    <path d="M12 4v4M12 16v4M4 12h4M16 12h4" stroke="currentColor" stroke-width="1" opacity="0.5"/>
  </svg>`
};

const icon = icons[iconKey] || icons.default;
---

<span class="subject-icon inline-flex items-center gap-1.5 text-[#F5F5DC]" title={subject}>
  <Fragment set:html={icon} />
  {showLabel && <span class="text-xs">{subject}</span>}
</span>

<style>
  .subject-icon :global(svg) {
    filter: drop-shadow(0 0 2px rgba(245, 245, 222, 0.1));
    transition: filter 0.2s ease;
  }

  .subject-icon:hover :global(svg) {
    filter: drop-shadow(0 0 4px rgba(245, 245, 222, 0.3));
  }
</style>
